<button class="blue" (click)="openModal()">Delegate</button>
<!-- The Modal -->
<div *ngIf="modalOpen" id="myModal" class="kukai-modal">
  <!-- Modal content -->
  <div class="km-content">
    <div class="x" (click)="closeModal()"><img src="../../../assets/img/x.svg"></div>
    <div class="km-header">
      <H1>Delegate (Choose a baker)</H1>
    </div>
    <!-- Prepare delegation -->
    <div class="km-body" *ngIf="activeView === 0">
      <div class="group">
        <label>Current Account Address</label>
        <p>{{ activeAccount.address }}</p>
      </div>
      <div class="group">
        <label>Delegate to Baker Address</label>
        <input type="text" class="text" [(ngModel)]="toPkh">
      </div>
      <div class="group">
        <label>Fee</label>
        <input type="text" class="text" [(ngModel)]="fee" placeholder={{this.recommendedFee.toString()}}>
      </div>
      <span *ngIf="formInvalid" class="danger no-margin">
        {{ formInvalid }}
      </span>
      <button class="green" (click)="openModal2()">Preview</button>
    </div>
    <!-- Confirm transaction -->
    <div class="km-body" *ngIf="activeView === 1">
      <p class="preview">
        From — {{ activeAccount.address }}
      </p>
      <p *ngIf="getDelegate()" class="preview">
        To — {{ getDelegate() | delegatorName }}
      </p>
      <p *ngIf="!getDelegate()" class="preview">
        Withdraw delegation
      </p>
      <p class="preview">
        Fee — {{ getFee() | number:'1.0-6' }} tez
      </p>
      <div class="row-group" style="margin: 1.25rem 0 1.5rem;">
        <input *ngIf="!walletService.isLedgerWallet()" [(ngModel)]="password" placeholder="Password" class="text password" type="password" (input)="this.pwdValid = ''" (change)="this.pwdValid = ''">
        <button style="height: 2.5rem;" [style.display]="(walletService.isLedgerWallet() && ledgerError) ? 'flex' : 'none'" (click)="ledgerSign()">Retry</button>
        <button [style.margin-left]="(walletService.isLedgerWallet() && ledgerError) ? '0' : 'auto'" class="green confirm" (click)="inject()" [disabled]="walletService.isLedgerWallet() && (!sendResponse || !sendResponse.payload || !sendResponse.payload.signedOperation)">
          {{ walletService.isLedgerWallet() ? 'Broadcast' : 'Confirm'}}</button>
      </div>
      <span *ngIf="this.pwdValid" class="danger margin">{{ this.pwdValid }}</span>
    </div>
  </div>
</div>